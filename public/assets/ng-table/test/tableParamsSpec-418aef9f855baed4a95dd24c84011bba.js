describe("ngTableParams",function(){var e,a=[{name:"Moroni",age:50,role:"Administrator"},{name:"Tiancum",age:43,role:"Administrator"},{name:"Jacob",age:27,role:"Administrator"},{name:"Nephi",age:29,role:"Moderator"},{name:"Enos",age:34,role:"User"},{name:"Tiancum",age:43,role:"User"},{name:"Jacob",age:27,role:"User"},{name:"Nephi",age:29,role:"Moderator"},{name:"Enos",age:34,role:"User"},{name:"Tiancum",age:43,role:"Moderator"},{name:"Jacob",age:27,role:"User"},{name:"Nephi",age:29,role:"User"},{name:"Enos",age:34,role:"Moderator"},{name:"Tiancum",age:43,role:"User"},{name:"Jacob",age:27,role:"User"},{name:"Nephi",age:29,role:"User"},{name:"Enos",age:34,role:"User"}];beforeEach(module("ngTable")),beforeEach(inject(function(a,t){e=t.$new()})),it("ngTableParams should be defined",inject(function(e){new e;expect(e).toBeDefined()})),it("ngTableParams test generatePagesArray",inject(function(e){var a=new e;expect(a.generatePagesArray(1,30,10)).toEqual([{type:"prev",number:1,active:!1},{type:"first",number:1,active:!1},{type:"page",number:2,active:!0},{type:"last",number:3,active:!0},{type:"next",number:2,active:!0}]),expect(a.generatePagesArray(2,30,10)).toEqual([{type:"prev",number:1,active:!0},{type:"first",number:1,active:!0},{type:"page",number:2,active:!1},{type:"last",number:3,active:!0},{type:"next",number:3,active:!0}]),expect(a.generatePagesArray(2,100,10)).toEqual([{type:"prev",number:1,active:!0},{type:"first",number:1,active:!0},{type:"page",number:2,active:!1},{type:"page",number:3,active:!0},{type:"page",number:4,active:!0},{type:"page",number:5,active:!0},{type:"page",number:6,active:!0},{type:"page",number:7,active:!0},{type:"more",active:!1},{type:"last",number:10,active:!0},{type:"next",number:3,active:!0}])})),it("ngTableParams `page` parameter",inject(function(a){var t=new a;expect(t.page()).toBe(1),expect(t.page(2)).toEqual(t),expect(t.page()).toBe(2),t=new a({page:3}),expect(t.page()).toBe(3);var r=0;e.tableParams=t,e.$watch("tableParams",function(e){r++,expect(e.page()).toBe(4)}),t.page(4),e.$apply(),expect(r).toBe(1),e.$apply(),expect(r).toBe(1)})),it("ngTableParams parse url parameters",inject(function(e){var a=new e({"sorting[name]":"asc","sorting[age]":"desc","filter[name]":"test","filter[age]":20});expect(a.filter()).toEqual({name:"test",age:20}),expect(a.filter({})).toEqual(a),expect(a.sorting()).toEqual({age:"desc"}),expect(a.sorting({})).toEqual(a)})),it("ngTableParams return url parameters",inject(function(e){var a=new e({"sorting[name]":"asc","sorting[age]":"desc","filter[name]":"test","filter[age]":20});expect(a.url()).toEqual({page:"1",count:"1","filter[name]":"test","filter[age]":20,"sorting[age]":"desc"}),expect(a.url(!0)).toEqual(["page=1","count=1","filter[name]=test","filter[age]=20","sorting[age]=desc"])})),it("ngTableParams test orderBy",inject(function(e){var a=new e({"sorting[name]":"asc"});expect(a.orderBy()).toEqual(["+name"]),a.sorting({name:"desc",age:"asc"}),expect(a.orderBy()).toEqual(["-name","+age"])})),it("ngTableParams test settings",inject(function(e){var a=new e;expect(a.settings()).toEqual({$scope:null,$loading:!1,data:null,total:0,defaultSort:"desc",counts:[10,25,50,100],getData:a.getData,getGroups:a.getGroups,filterDelay:750}),a=new e({},{total:100}),expect(a.settings()).toEqual({$scope:null,$loading:!1,data:null,total:100,defaultSort:"desc",counts:[10,25,50,100],getData:a.getData,getGroups:a.getGroups,filterDelay:750})})),it("ngTableParams test getData",inject(function(e,a){var t=new a;$defer=e.defer(),$defer.promise.then(function(e){expect(e).toEqual([])}),t.getData($defer)})),it("ngTableParams test grouping",inject(function(e,t){var r=new t;r.getData=function(e){e.resolve(a)},$defer=e.defer(),$defer.promise.then(function(e){expect(e).toEqual([{value:"Administrator",data:[{name:"Moroni",age:50,role:"Administrator"},{name:"Tiancum",age:43,role:"Administrator"},{name:"Jacob",age:27,role:"Administrator"}]},{value:"Moderator",data:[{name:"Nephi",age:29,role:"Moderator"},{name:"Nephi",age:29,role:"Moderator"},{name:"Tiancum",age:43,role:"Moderator"},{name:"Enos",age:34,role:"Moderator"}]},{value:"User",data:[{name:"Enos",age:34,role:"User"},{name:"Tiancum",age:43,role:"User"},{name:"Jacob",age:27,role:"User"},{name:"Enos",age:34,role:"User"},{name:"Jacob",age:27,role:"User"},{name:"Nephi",age:29,role:"User"},{name:"Tiancum",age:43,role:"User"},{name:"Jacob",age:27,role:"User"},{name:"Nephi",age:29,role:"User"},{name:"Enos",age:34,role:"User"}]}])}),r.getGroups($defer,"role"),$defer=e.defer(),$defer.promise.then(function(e){expect(e).toEqual([{value:50,data:[{name:"Moroni",age:50,role:"Administrator"}]},{value:43,data:[{name:"Tiancum",age:43,role:"Administrator"},{name:"Tiancum",age:43,role:"User"},{name:"Tiancum",age:43,role:"Moderator"},{name:"Tiancum",age:43,role:"User"}]},{value:27,data:[{name:"Jacob",age:27,role:"Administrator"},{name:"Jacob",age:27,role:"User"},{name:"Jacob",age:27,role:"User"},{name:"Jacob",age:27,role:"User"}]},{value:29,data:[{name:"Nephi",age:29,role:"Moderator"},{name:"Nephi",age:29,role:"Moderator"},{name:"Nephi",age:29,role:"User"},{name:"Nephi",age:29,role:"User"}]},{value:34,data:[{name:"Enos",age:34,role:"User"},{name:"Enos",age:34,role:"User"},{name:"Enos",age:34,role:"Moderator"},{name:"Enos",age:34,role:"User"}]}])}),r.getGroups($defer,"age")}))});