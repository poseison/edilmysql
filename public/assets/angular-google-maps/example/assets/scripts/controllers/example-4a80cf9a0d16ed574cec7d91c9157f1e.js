angular.module("angular-google-maps-example",["google-maps"]).value("rndAddToLatLon",function(){return Math.floor(2*(Math.random()<.5?-1:1)+1)}).controller("controller",function(e,t,o,i,n){google.maps.visualRefresh=!0;var a="rawgithub.com"===window.location.host?"http://rawgithub.com/nlaplante/angular-google-maps/master/package.json":"/package.json";i.get(a).success(function(t){t||console.error("no version object found!!"),e.version=t.version});var l=function(e){e.showWindow=!0},r=function(e,t){for(var o=[],i=0;e>i;i++)o.push(s(i,t.map.bounds));t.map.randomMarkers=o},s=function(e,t){var o=t.southwest.latitude,i=t.northeast.latitude-o,n=t.southwest.longitude,a=t.northeast.longitude-n,l=o+Math.random()*i,r=n+Math.random()*a;return{latitude:l,longitude:r,title:"m"+e}};angular.extend(e,{map:{control:{},version:"uknown",heatLayerCallback:function(e){new MockHeatLayer(e)},showTraffic:!0,showBicycling:!1,showWeather:!1,showHeat:!1,center:{latitude:45,longitude:-73},options:{streetViewControl:!1,panControl:!1,maxZoom:20,minZoom:3},zoom:3,dragging:!1,bounds:{},markers:[{latitude:45,longitude:-74,showWindow:!1,title:"Marker 2"},{latitude:15,longitude:30,showWindow:!1,title:"Marker 2"},{icon:"assets/images/plane.png",latitude:37,longitude:-122,showWindow:!1,title:"Plane"}],markers2:[{latitude:46,longitude:-77,showWindow:!1,title:"[46,-77]"},{latitude:33,longitude:-77,showWindow:!1,title:"[33,-77]"},{icon:"assets/images/plane.png",latitude:35,longitude:-125,showWindow:!1,title:"[35,-125]"}],mexiMarkers:[{latitude:29.302567,longitude:-106.248779},{latitude:30.369913,longitude:-109.434814},{latitude:26.739478,longitude:-108.61084}],dynamicMarkers:[],randomMarkers:[],clickMarkers:[{latitude:50.948968,longitude:6.944781},{latitude:50.94129,longitude:6.95817},{latitude:50.9175,longitude:6.943611}],doClusterRandomMarkers:!0,doUgly:!0,clusterOptions:{title:"Hi I am a Cluster!",gridSize:60,ignoreHidden:!0,minimumClusterSize:2,imageExtension:"png",imagePath:"assets/images/cluster",imageSizes:[72]},clickedMarker:{title:"You clicked here",latitude:null,longitude:null},events:{tilesloaded:function(){},click:function(t,i,n){o.log("user defined event: "+i,t,n);var a=n[0];e.map.clickedMarker?(e.map.clickedMarker.latitude=a.latLng.lat(),e.map.clickedMarker.longitude=a.latLng.lng()):e.map.clickedMarker={title:"You clicked here",latitude:a.latLng.lat(),longitude:a.latLng.lng()},e.$apply()},dragend:function(){self=this,t(function(){modified=_.map(e.map.mexiMarkers,function(e){return{latitude:e.latitude+n(),longitude:e.longitude+n()}}),e.map.mexiMarkers=modified})}},infoWindow:{coords:{latitude:36.27085,longitude:-44.296875},options:{disableAutoPan:!0},show:!1},infoWindowWithCustomClass:{coords:{latitude:36.27085,longitude:-44.296875},options:{boxClass:"custom-info-window"},show:!0},templatedInfoWindow:{coords:{latitude:48.654686,longitude:-75.9375},options:{disableAutoPan:!0},show:!0,templateUrl:"assets/templates/info.html",templateParameter:{message:"passed in from the opener"}},polylines:[{path:[{latitude:45,longitude:-74},{latitude:30,longitude:-89},{latitude:37,longitude:-122},{latitude:60,longitude:-95}],stroke:{color:"#6060FB",weight:3},editable:!0,draggable:!1,geodesic:!1,visible:!0},{path:[{latitude:47,longitude:-74},{latitude:32,longitude:-89},{latitude:39,longitude:-122},{latitude:62,longitude:-95}],stroke:{color:"#6060FB",weight:3},editable:!0,draggable:!0,geodesic:!0,visible:!0}]},toggleColor:function(e){return"red"==e?"#6060FB":"red"}}),_.each(e.map.markers,function(t){t.closeClick=function(){t.showWindow=!1,e.$apply()},t.onClicked=function(){l(t)}}),_.each(e.map.markers2,function(t){t.closeClick=function(){t.showWindow=!1,e.$apply()},t.onClicked=function(){l(t)}}),e.removeMarkers=function(){o.info("Clearing markers. They should disappear from the map now"),e.map.markers.length=0,e.map.markers2.length=0,e.map.dynamicMarkers.length=0,e.map.randomMarkers.length=0,e.map.mexiMarkers.length=0,e.map.polylines.length=0,e.map.clickedMarker=null,e.searchLocationMarker=null,e.map.infoWindow.show=!1,e.map.templatedInfoWindow.show=!1},e.refreshMap=function(){e.map.control.refresh({latitude:32.77968,longitude:-79.935493}),e.map.control.getGMap().setZoom(11)},e.getMapInstance=function(){alert("You have Map Instance of"+e.map.control.getGMap().toString())},e.map.clusterOptionsText=JSON.stringify(e.map.clusterOptions),e.$watch("map.clusterOptionsText",function(t,o){t!==o&&(e.map.clusterOptions=angular.fromJson(e.map.clusterOptionsText))}),e.$watch("map.doUgly",function(t,o){var i;t!==o&&(i=t?{title:"Hi I am a Cluster!",gridSize:60,ignoreHidden:!0,minimumClusterSize:2,imageExtension:"png",imagePath:"http://localhost:3000/example/cluster",imageSizes:[72]}:{title:"Hi I am a Cluster!",gridSize:60,ignoreHidden:!0,minimumClusterSize:2},e.map.clusterOptions=i,e.map.clusterOptionsText=angular.toJson(i))}),e.genRandomMarkers=function(t){r(t,e)},e.searchLocationMarker={coords:{latitude:40.1451,longitude:-99.668},options:{draggable:!0},events:{dragend:function(e){o.log("marker dragend"),o.log(e.getPosition().lat()),o.log(e.getPosition().lng())}}},e.onMarkerClicked=l,e.clackMarker=function(e){o.log("from clackMarker"),o.log(e)},t(function(){e.map.polylines[0].path.push({latitude:61,longitude:-105}),e.map.polylines[0].path.push({latitude:70,longitude:-105}),e.map.infoWindow.show=!0;var t=[{latitude:46,longitude:-79,showWindow:!1},{latitude:33,longitude:-79,showWindow:!1},{icon:"assets/images/plane.png",latitude:35,longitude:-127,showWindow:!1}];_.each(t,function(t){t.closeClick=function(){t.showWindow=!1,e.$apply()},t.onClicked=function(){l(t)}}),e.map.dynamicMarkers=t},2e3)});