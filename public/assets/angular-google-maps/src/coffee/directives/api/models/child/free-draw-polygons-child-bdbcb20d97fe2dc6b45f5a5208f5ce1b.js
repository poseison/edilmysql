(function(){angular.module("google-maps.directives.api.models.child").factory("DrawFreeHandChildModel",["Logger","$q",function(e,n){var o,t;return o=function(e,n,o){var t,r;return this.polys=n,r=new google.maps.Polyline({map:e,clickable:!1}),t=google.maps.event.addListener(e,"mousemove",function(e){return r.getPath().push(e.latLng)}),void google.maps.event.addListenerOnce(e,"mouseup",function(){var i;return google.maps.event.removeListener(t),i=r.getPath(),r.setMap(null),n.push(new google.maps.Polygon({map:e,path:i})),r=null,google.maps.event.clearListeners(e.getDiv(),"mousedown"),o()})},t=function(t){var r,i;return this.map=t,i=function(e){return function(){var n;return null!=(n=e.deferred)&&n.resolve(),e.map.setOptions(e.oldOptions)}}(this),r=function(n){return function(){return e.info("disabling map move"),n.oldOptions=t.getOptions(),n.map.setOptions({draggable:!1,zoomControl:!1,scrollwheel:!1,disableDoubleClickZoom:!1})}}(this),this.engage=function(t){return function(a){return t.polys=a,t.deferred=n.defer(),r(),e.info("DrawFreeHandChildModel is engaged (drawing)."),google.maps.event.addDomListener(t.map.getDiv(),"mousedown",function(){return o(t.map,t.polys,i)}),t.deferred.promise}}(this),this}}])}).call(this);