var KeyTable;!function(e,t,n){var o=function(o){"use strict";return KeyTable=function(a){function l(e){return function(t,n,o){if(null!==t&&"number"!=typeof t||null!==n&&"number"!=typeof n||"function"!=typeof o)if("object"==typeof t&&"function"==typeof n){var a=h(t);r(e,a[0],a[1],n)}else alert("Unhandable event type was added: x"+t+"  y:"+n+"  z:"+o);else r(e,t,n,o)}}function f(e){return function(t,n,o){if(null!==t&&"number"!=typeof arguments[0]||null!==n&&"number"!=typeof arguments[1])if("object"==typeof arguments[0]){var a=h(t);"function"==typeof arguments[1]?i(e,a[0],a[1],n):i(e,a[0],a[1])}else alert("Unhandable event type was removed: x"+t+"  y:"+n+"  z:"+o);else"function"==typeof arguments[2]?i(e,t,n,o):i(e,t,n)}}function r(e,t,n,o){B[e].push({x:t,y:n,fn:o})}function i(e,t,n,o){for(var a=0,l=0,f=B[e].length;f-a>l;l++)if("undefined"!=typeof o)B[e][l-a].x==t&&B[e][l-a].y==n&&B[e][l-a].fn==o&&(B[e].splice(l-a,1),a++);else if(B[e][l-a].x==t&&B[e][l-a].y==n)return B[e].splice(l,1),1;return a}function s(e,t,n){for(var o=0,a=B[e],l=0;l<a.length;l++)(a[l].x==t&&a[l].y==n||null===a[l].x&&a[l].y==n||a[l].x==t&&null===a[l].y||null===a[l].x&&null===a[l].y)&&(a[l].fn(m(t,n),t,n),o++);return o}function u(n,a){if(_!=n){"undefined"==typeof a&&(a=!0),null!==_&&d(_),o(n).addClass(w),o(n).parent().addClass(w);var l;if(P){l=P;for(var f=N(n)[1],r=j;f>=l.fnDisplayEnd();)l._iDisplayLength>=0?l._iDisplayStart+l._iDisplayLength<l.fnRecordsDisplay()&&(l._iDisplayStart+=l._iDisplayLength):l._iDisplayStart=0,P.oApi._fnCalculateEnd(l);for(;f<l._iDisplayStart;)l._iDisplayStart=l._iDisplayLength>=0?l._iDisplayStart-l._iDisplayLength:0,l._iDisplayStart<0&&(l._iDisplayStart=0),P.oApi._fnCalculateEnd(l);P.oApi._fnDraw(l),j=r}var i=h(n);_=n,C=i[0],K=i[1];var u,c,y,p,T,m,S;if(a&&(u=o(e).height(),c=o(e).width(),y=o(t).scrollTop(),p=o(t).scrollLeft(),T=n.offsetHeight,m=n.offsetWidth,S=D(n),!P||"undefined"==typeof l.oScroll||""===l.oScroll.sX&&""===l.oScroll.sY||(S[1]-=o(l.nTable.parentNode).scrollTop(),S[0]-=o(l.nTable.parentNode).scrollLeft()),S[1]+T>y+u?g(S[1]+T-u):S[1]<y&&g(S[1]),S[0]+m>p+c?v(S[0]+m-c):S[0]<p&&v(S[0])),P&&"undefined"!=typeof l.oScroll&&(""!==l.oScroll.sX||""!==l.oScroll.sY)){var k=l.nTable.parentNode;u=k.clientHeight,c=k.clientWidth,y=k.scrollTop,p=k.scrollLeft,T=n.offsetHeight,m=n.offsetWidth,n.offsetTop+T>u+y?k.scrollTop=n.offsetTop+T-u:n.offsetTop<y&&(k.scrollTop=n.offsetTop),n.offsetLeft+m>c+p?k.scrollLeft=n.offsetLeft+m-c:n.offsetLeft<p&&(k.scrollLeft=n.offsetLeft)}b(),s("focus",C,K)}}function c(){d(_),C=null,K=null,_=null,T()}function d(e){o(e).removeClass(w),o(e).parent().removeClass(w),s("blur",C,K)}function y(){for(var e=this;"TD"!=e.nodeName;)e=e.parentNode;u(e),b()}function p(e){if(E.block||!j)return!0;if(e.metaKey||e.altKey||e.ctrlKey)return!0;var t,n,o,a=L.getElementsByTagName("tr")[0].getElementsByTagName("td").length;if(P){o=P.aiDisplay.length;var l=N(_);if(null===l)return;C=l[0],K=l[1]}else o=L.getElementsByTagName("tr").length;var f=9==e.keyCode&&e.shiftKey?-1:e.keyCode;switch(f){case 13:return e.preventDefault(),e.stopPropagation(),s("action",C,K),!0;case 27:if(!s("esc",C,K))return void c();t=C,n=K;break;case-1:case 37:if(C>0)t=C-1,n=K;else{if(!(K>0))return-1==f&&k?(A=!0,x.focus(),setTimeout(function(){A=!1},0),j=!1,c(),!0):!1;t=a-1,n=K-1}break;case 38:if(!(K>0))return!1;t=C,n=K-1;break;case 36:t=C,n=0;break;case 33:t=C,n=K-10,0>n&&(n=0);break;case 9:case 39:if(a-1>C)t=C+1,n=K;else{if(!(o-1>K))return 9==f&&k?(A=!0,x.focus(),setTimeout(function(){A=!1},0),j=!1,c(),!0):!1;t=0,n=K+1}break;case 40:if(!(o-1>K))return!1;t=C,n=K+1;break;case 35:t=C,n=o-1;break;case 34:t=C,n=K+10,n>o-1&&(n=o-1);break;default:return!0}return u(m(t,n)),!1}function b(){j||(j=!0)}function T(){j=!1}function m(e,t){return P?"undefined"!=typeof P.aoData[P.aiDisplay[t]]?P.aoData[P.aiDisplay[t]].nTr.getElementsByTagName("td")[e]:null:o("tr:eq("+t+")>td:eq("+e+")",L)[0]}function h(e){return P?[o("td",e.parentNode).index(e),o("tr",e.parentNode.parentNode).index(e.parentNode)+P._iDisplayStart]:[o("td",e.parentNode).index(e),o("tr",e.parentNode.parentNode).index(e.parentNode)]}function g(e){t.documentElement.scrollTop=e,t.body.scrollTop=e}function v(e){t.documentElement.scrollLeft=e,t.body.scrollLeft=e}function D(e){var t=0,n=0;if(e.offsetParent)for(t=e.offsetLeft,n=e.offsetTop,e=e.offsetParent;e;)t+=e.offsetLeft,n+=e.offsetTop,e=e.offsetParent;return[t,n]}function N(e){for(var t=0,n=P.aiDisplay.length;n>t;t++)for(var o=P.aoData[P.aiDisplay[t]].nTr,a=o.getElementsByTagName("td"),l=0,f=a.length;f>l;l++)if(a[l]==e)return[l,t];return null}function S(e,n,a,l){if(E=l,"undefined"==typeof a&&(a={}),"undefined"==typeof a.focus&&(a.focus=[0,0]),a.table=e,o(a.table).addClass("KeyTable"),"undefined"!=typeof a.focusClass&&(w=a.focusClass),"undefined"!=typeof n&&(P=n),"undefined"==typeof a.initScroll&&(a.initScroll=!0),"undefined"==typeof a.form&&(a.form=!1),k=a.form,L=a.table.getElementsByTagName("tbody")[0],k){var f=t.createElement("div");x=t.createElement("input"),f.style.height="1px",f.style.width="0px",f.style.overflow="hidden","undefined"!=typeof a.tabIndex&&(x.tabIndex=a.tabIndex),f.appendChild(x),a.table.parentNode.insertBefore(f,a.table.nextSibling),o(x).focus(function(){A||(j=!0,A=!1,"undefined"!=typeof a.focus.nodeName?u(a.focus,a.initScroll):u(m(a.focus[0],a.focus[1]),a.initScroll),setTimeout(function(){x.blur()},0))}),j=!1}else"undefined"!=typeof a.focus.nodeName?u(a.focus,a.initScroll):u(m(a.focus[0],a.focus[1]),a.initScroll),b();o(t).bind("keydown",p),P?o(P.nTable).on("click","td",y):o(L).on("click","td",y),o(t).click(function(e){for(var t=e.target,n=!1;t;){if(t==a.table){n=!0;break}t=t.parentNode}n||c()})}this.block=!1,this.event={remove:{}},this.fnGetCurrentPosition=function(){return[C,K]},this.fnGetCurrentData=function(){return _.innerHTML},this.fnGetCurrentTD=function(){return _},this.fnSetPosition=function(e,t){u("object"==typeof e&&e.nodeName?e:m(e,t))},this.fnBlur=function(){c()};var k,x,L=null,_=null,C=null,K=null,E=null,w="focus",j=!1,B={action:[],esc:[],focus:[],blur:[]},P=null,A=!1;for(var H in B)H&&(this.event[H]=l(H),this.event.remove[H]=f(H));var Q,q;a===n?(Q=o("table.KeyTable")[0],q=null):o.isPlainObject(a)?(Q=a.table,q=a.datatable):(q=new o.fn.dataTable.Api(a).settings()[0],Q=q.nTable),S(Q,q,a,this)},KeyTable.version="1.2.0",o.fn.dataTable.KeyTable=KeyTable,o.fn.DataTable.KeyTable=KeyTable,KeyTable};"function"==typeof define&&define.amd?define("datatables-keytable",["jquery","datatables"],o):jQuery&&!jQuery.fn.dataTable.KeyTable&&o(jQuery,jQuery.fn.dataTable)}(window,document);